<ion-header>
  <ion-toolbar color="light">
    <ion-buttons slot="start">
      <ion-button color="danger" (click)="cancel()">Cancel</ion-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button color="primary" (click)="confirm()" [strong]="true">{{formButtonName()}}</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>
  <form [formGroup]="entryForm">
    <ion-item lines="none" class="ion-text-center">
      <ion-label color="primary">
        <h2> Fill your timesheet </h2>
      </ion-label>
    </ion-item>
    <ion-card>
      <ion-card-content>
        <ion-grid>
          <ion-row>
            <ion-col size="12" class="ion-text-center">
              <ion-item class="ion-no-padding">
                <ion-input label="Work Date" labelPlacement="floating" [value]="workDateDisplay" readonly
                  id="open-date-modal"></ion-input>
                <ion-modal trigger="open-date-modal" [keepContentsMounted]="true" #workDateModal>
                  <ng-template>
                    <ion-header>
                      <ion-toolbar>
                        <ion-buttons slot="start">
                          <ion-button (click)="workDateModal.dismiss()">Cancel</ion-button>
                        </ion-buttons>
                        <ion-buttons slot="end">
                          <ion-button (click)="confirmWorkDate(workDate, workDateModal)"
                            [strong]="true">Done</ion-button>
                        </ion-buttons>
                      </ion-toolbar>
                    </ion-header>
                    <ion-content>
                      <ion-datetime #workDate id="entryFormDate" presentation="date"
                        [value]="entryForm.get('workDate')?.value" [showDefaultButtons]="false">
                      </ion-datetime>
                    </ion-content>
                  </ng-template>
                </ion-modal>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="12" class="ion-text-center">
              <ion-item class="ion-no-padding">
                <ion-input label="Start Time" labelPlacement="floating" [value]="startTimeDisplay" readonly
                  id="open-start-modal"></ion-input>
                <ion-modal trigger="open-start-modal" [keepContentsMounted]="true" #startTimeModal>
                  <ng-template>
                    <ion-header>
                      <ion-toolbar>
                        <ion-buttons slot="start">
                          <ion-button (click)="startTimeModal.dismiss()">Cancel</ion-button>
                        </ion-buttons>
                        <ion-buttons slot="end">
                          <ion-button (click)="confirmStartTime(startTime, startTimeModal)"
                            [strong]="true">Done</ion-button>
                        </ion-buttons>
                      </ion-toolbar>
                    </ion-header>
                    <ion-content>
                      <ion-datetime #startTime id="startTimeInput" presentation="time" [value]="startTimeISO"
                        hourValues="12,13,14,15,16,17,18,19,20,21,22" [preferWheel]="true" locale="es-ES"
                        minuteValues="0,5,10,15,20,25,30,35,40,45,50,55" [showDefaultButtons]="false">
                      </ion-datetime>
                    </ion-content>
                  </ng-template>
                </ion-modal>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col class="ion-text-center">
              <ion-item class="ion-no-padding">
                <ion-input label="End Time" labelPlacement="floating" [value]="endTimeDisplay" readonly
                  id="open-end-modal"></ion-input>
                <ion-modal trigger="open-end-modal" [keepContentsMounted]="true" #endTimeModal>
                  <ng-template>
                    <ion-header>
                      <ion-toolbar>
                        <ion-buttons slot="start">
                          <ion-button (click)="endTimeModal.dismiss()">Cancel</ion-button>
                        </ion-buttons>
                        <ion-buttons slot="end">
                          <ion-button (click)="confirmEndTime(endTime, endTimeModal)" [strong]="true">Done</ion-button>
                        </ion-buttons>
                      </ion-toolbar>
                    </ion-header>
                    <ion-content>
                      <ion-datetime #endTime id="endTimeInput" presentation="time" [value]="endTimeISO"
                        hourValues="12,13,14,15,16,17,18,19,20,21,22" [preferWheel]="true" locale="es-ES"
                        minuteValues="0,5,10,15,20,25,30,35,40,45,50,55" [showDefaultButtons]="false">
                      </ion-datetime>
                    </ion-content>
                  </ng-template>
                </ion-modal>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col class="ion-text-center">
              <ion-item class="ion-no-padding">
                <ion-select label="Break Time (in minutes)" labelPlacement="floating" formControlName="breakTime"
                  interface="popover">
                  <ion-select-option value="00">00</ion-select-option>
                  <ion-select-option value="15">15</ion-select-option>
                  <ion-select-option value="30">30</ion-select-option>
                  <ion-select-option value="60">60</ion-select-option>
                </ion-select>
              </ion-item>
            </ion-col>
          </ion-row>
        </ion-grid>

      </ion-card-content>
    </ion-card>

    <ion-card>
      <ion-card-content class="ion-text-center">
        <h2>
          You have worked on <ion-note color="tertiary"><strong>{{ duration() }}</strong></ion-note> hours on <ion-note
            color="tertiary"><strong>{{ entryForm.get('workDate')?.value | date:'mediumDate' }}</strong></ion-note>.
        </h2>
      </ion-card-content>
    </ion-card>
  </form>
</ion-content>